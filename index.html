
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&family=Raleway:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <title>Green Loan | Quick & Easy Loan Solutions</title>
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script>
    (function() {
        emailjs.init("_8YQFTuQu6xSzxIxK"); // Replace with your EmailJS public key
    })();
  </script>
  <style>
    :root {
      --primary-color: #33F8AA;
      --secondary-color: #0074E4;
      --accent-color: #8B5CF6;
      --dark-bg: #0F172A;
      --light-bg: #1E293B;
      --text-color: #F8FAFC;
      --glass-bg: rgba(255, 255, 255, 0.05);
      --glass-border: rgba(255, 255, 255, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Raleway', sans-serif;
      scroll-behavior: smooth;
    }

    body {
      background-color: var(--dark-bg);
      color: var(--text-color);
      overflow-x: hidden;
      background-image: 
        radial-gradient(circle at 20% 25%, rgba(51, 248, 170, 0.05) 0%, transparent 50%),
        radial-gradient(circle at 75% 75%, rgba(139, 92, 246, 0.05) 0%, transparent 50%);
    }

    h1, h2, h3, h4, h5 {
      font-family: 'Orbitron', sans-serif;
      letter-spacing: 1px;
    }

    .hidden {
        display: none;
    }

    /* Nav styles */
    .nav__bar {
      backdrop-filter: blur(10px);
      background: var(--glass-bg);
      border-bottom: 1px solid var(--glass-border);
      position: fixed;
      width: 100%;
      z-index: 1000;
      padding: 1rem 5%;
    }

    .nav__header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .nav__logo a {
      color: var(--primary-color);
      font-family: 'Orbitron', sans-serif;
      font-weight: 700;
      font-size: 1.5rem;
      text-decoration: none;
      display: flex;
      align-items: center;
    }

    .nav__logo span {
      color: var(--accent-color);
      margin-left: 5px;
      position: relative;
      top: -2px;
    }

    .nav__links {
      display: flex;
      gap: 2rem;
      list-style: none;
      margin-top: 1rem;
    }

    .nav__links a {
      color: var(--text-color);
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      position: relative;
    }

    .nav__links a::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--primary-color);
      transition: width 0.3s ease;
    }

    .nav__links a:hover {
      color: var(--primary-color);
    }

    .nav__links a:hover::after {
      width: 100%;
    }

    .nav__menu__btn {
      display: none;
      cursor: pointer;
      color: var(--text-color);
    }

    /* Header styles */
    .header {
      padding-top: 70px;
    }

    .header__image-slider {
        width: 100%;
        overflow: hidden;
        position: relative;
        border-radius: 10px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        margin-bottom: 2rem;
    }

    .header__image {
        display: flex;
        width: 300%;
        animation: swipe 15s infinite ease-in-out;
    }

    .header__image img {
        width: 50.33%;
        flex-shrink: 0;
        object-fit: cover;
        position: relative;
    }

    .header__image::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, rgba(15, 23, 42, 0.4), rgba(15, 23, 42, 0.8));
        z-index: 1;
    }

    .header__content {
        text-align: center;
        margin-top: 2rem;
        animation: fadeUp 1s ease-out;
    }

    .header__content h1 {
        color: var(--primary-color);
        margin-bottom: 1rem;
        font-size: 2.5rem;
        text-shadow: 0 0 10px rgba(51, 248, 170, 0.5);
    }

    .header__content h4 {
        color: var(--accent-color);
        margin-bottom: 1rem;
        font-size: 1.5rem;
    }

    .header__content p {
        max-width: 800px;
        margin: 0 auto 1rem;
        line-height: 1.6;
    }

    /* Section styles */
    .section__container {
        padding: 5rem 5%;
        max-width: 1200px;
        margin: 0 auto;
    }

    .section__header {
        text-align: center;
        font-size: 2rem;
        margin-bottom: 2rem;
        color: var(--primary-color);
        position: relative;
        display: inline-block;
        left: 50%;
        transform: translateX(-50%);
    }

    .section__header::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 0;
        width: 100%;
        height: 2px;
        background: linear-gradient(to right, transparent, var(--primary-color), transparent);
    }

    .section__subheader {
        text-align: center;
        color: var(--accent-color);
        margin-bottom: 0.5rem;
        font-family: 'Orbitron', sans-serif;
    }

    /* About section */
    .about__container {
        background: var(--light-bg);
        border-radius: 16px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        margin: 5rem auto;
        backdrop-filter: blur(10px);
        border: 1px solid var(--glass-border);
        animation: fadeIn 1s ease-out;
    }

    .about__content {
        padding: 2rem;
    }

    .about__content p {
        margin-bottom: 1.5rem;
        line-height: 1.6;
    }

    /* Services section */
    .service__grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 2rem;
        margin-top: 3rem;
    }

    .service__card {
        background: var(--light-bg);
        border-radius: 16px;
        overflow: hidden;
        transition: all 0.3s ease;
        position: relative;
        height: 300px;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        border: 1px solid var(--glass-border);
        cursor: pointer;
        text-decoration: none;
        color: var(--text-color);
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
        animation: fadeUp 0.8s ease-out;
    }

    .service__card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(51, 248, 170, 0.2);
    }

    .service__card span {
        position: absolute;
        top: 20px;
        left: 20px;
        background: var(--glass-bg);
        border-radius: 50%;
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid var(--glass-border);
        z-index: 2;
    }

    .service__card span i {
        font-size: 1.5rem;
        color: var(--primary-color);
    }

    .service__background {
        position: absolute;
        width: 100%;
        height: 100%;
        object-fit: cover;
        opacity: 0.4;
        transition: all 0.3s ease;
        z-index: 1;
    }

    .service__card:hover .service__background {
        opacity: 0.6;
        transform: scale(1.1);
    }

    .service__content {
        position: relative;
        z-index: 2;
        padding: 1.5rem;
        background: linear-gradient(to top, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0));
    }

    .service__content h4 {
        color: var(--primary-color);
        margin-bottom: 0.5rem;
    }

    /* Contact section */
    .contact__container {
        text-align: center;
        background: var(--light-bg);
        border-radius: 16px;
        margin: 5rem auto;
        padding: 3rem 2rem;
        backdrop-filter: blur(10px);
        border: 1px solid var(--glass-border);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        animation: fadeIn 1s ease-out;
    }

    .contact__container p {
        margin-bottom: 1rem;
    }

    .contact__container a {
        color: var(--primary-color);
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .contact__container a:hover {
        text-decoration: underline;
    }

    /* Loan application form */
    .loan__application {
        background: var(--light-bg);
        border-radius: 16px;
        padding: 2rem;
        max-width: 800px;
        margin: 5rem auto;
        backdrop-filter: blur(10px);
        border: 1px solid var(--glass-border);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        animation: fadeUp 0.8s ease-out;
    }

    .form__group {
        margin-bottom: 1.5rem;
    }

    .form__group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
    }

    .form__group input,
    .form__group select {
        width: 100%;
        padding: 0.75rem 1rem;
        border-radius: 8px;
        border: 1px solid var(--glass-border);
        background: var(--dark-bg);
        color: var(--text-color);
        font-size: 1rem;
        transition: all 0.3s ease;
    }

    .form__group input:focus,
    .form__group select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(51, 248, 170, 0.2);
    }

    .form__group input[type="file"] {
        padding: 0.5rem 0;
        background: transparent;
        border: none;
    }

    .form__group input[type="file"]::-webkit-file-upload-button {
        background: var(--primary-color);
        color: var(--dark-bg);
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 4px;
        cursor: pointer;
        margin-right: 1rem;
        font-weight: 600;
    }

    button[type="submit"] {
        background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
        color: var(--dark-bg);
        border: none;
        padding: 1rem 2rem;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 700;
        cursor: pointer;
        width: 100%;
        margin-top: 1rem;
        transition: all 0.3s ease;
        font-family: 'Orbitron', sans-serif;
        text-transform: uppercase;
        letter-spacing: 1px;
        position: relative;
        overflow: hidden;
    }

    button[type="submit"]::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: 0.5s;
    }

    button[type="submit"]:hover::before {
        left: 100%;
    }

    /* Loader */
    #loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(15, 23, 42, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }

    .loader {
        width: 48px;
        height: 48px;
        border: 5px solid var(--primary-color);
        border-bottom-color: transparent;
        border-radius: 50%;
        animation: rotation 1s linear infinite;
    }

    /* Success popup */
    .popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: var(--light-bg);
        padding: 2rem;
        border-radius: 16px;
        text-align: center;
        z-index: 9999;
        max-width: 90%;
        width: 500px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        border: 1px solid var(--glass-border);
        backdrop-filter: blur(10px);
    }

    .popup p {
        margin-bottom: 1.5rem;
        line-height: 1.6;
    }

    .popup button {
        background: var(--primary-color);
        color: var(--dark-bg);
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .popup button:hover {
        background: var(--accent-color);
    }

    /* Footer */
    .footer {
        background: var(--light-bg);
        border-top: 1px solid var(--glass-border);
        padding: 3rem 0 1rem;
    }

    .footer__container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
    }

    .footer__col h5 {
        margin-bottom: 1.5rem;
        font-size: 1.5rem;
    }

    .footer__col h5 a {
        color: var(--primary-color);
        text-decoration: none;
    }

    .footer__col h4 {
        color: var(--accent-color);
        margin-bottom: 1.5rem;
    }

    .footer__col p {
        margin-bottom: 1.5rem;
        text-align: left;
    }

    .footer__socials {
        display: flex;
        gap: 1rem;
    }

    .footer__socials a {
        color: var(--text-color);
        font-size: 1.25rem;
        transition: all 0.3s ease;
    }

    .footer__socials a:hover {
        color: var(--primary-color);
    }

    .footer__links {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .footer__links a {
        color: var(--text-color);
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .footer__links a:hover {
        color: var(--primary-color);
    }

    /* Animations */
    @keyframes swipe {
        0%, 30% { transform: translateX(0%); }
        33%, 63% { transform: translateX(-33.33%); }
        66%, 97% { transform: translateX(-66.66%); }
        100% { transform: translateX(0%); }
    }

    @keyframes rotation {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes fadeUp {
        from { 
            opacity: 0; 
            transform: translateY(20px);
        }
        to { 
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Responsive styles */
    @media screen and (max-width: 768px) {
        .nav__links {
            position: fixed;
            top: 70px;
            left: 0;
            width: 100%;
            height: 0;
            background: var(--light-bg);
            flex-direction: column;
            align-items: center;
            overflow: hidden;
            transition: all 0.3s ease;
            opacity: 0;
            padding: 0;
        }

        .nav__links.active {
            height: auto;
            padding: 2rem 0;
            opacity: 1;
        }

        .nav__menu__btn {
            display: block;
        }

        .header__content h1 {
            font-size: 2rem;
        }

        .section__container {
            padding: 3rem 5%;
        }
    }
  </style>
</head>

<body>
  <header class="header">
    <nav>
      <div class="nav__bar">
        <div class="nav__header">
          <div class="nav__logo">
            <a href="#">Green Financial Service <span>$</span></a>
          </div>
          <div class="nav__menu__btn" id="menu-btn">
            <span><i class="ri-menu-3-line"></i></span>
          </div>
        </div>
        <ul class="nav__links" id="nav-links">
          <li class="link"><a href="#home">Home</a></li>
          <li class="link"><a href="#about">About Us</a></li>
          <li class="link"><a href="#services">Services</a></li>
          <li class="link"><a href="#contact">Contact</a></li>
        </ul>
      </div>
    </nav>
    <div class="section__container header__container" id="home">
      <div class="header__image-slider">
        <div class="header__image">
          <img src="assets/happy1.jpg" alt="header" />
          <img src="assets/Investor.jpg" alt="header" />
          <img src="assets/loan.jpg" alt="header" />
        </div>
      </div>
      <div class="header__content">
        <h1>Welcome to Green Loan – Your Trusted Loan Partner!</h1>
        <h4>Simple, Fast & Reliable</h4>
        <p>Need a quick and affordable loan? We've got you covered! At Green Loan, we offer industry-leading rates of just 39.99% and approval in under 24 hours.</p>
        <p>Whether you're looking to borrow, invest, or expand your financial knowledge, we're here to guide you every step of the way.</p>
      </div>
    </div>
  </header>

  <section class="section__container about__container" id="about">
    <div class="about__content">
      <h2 class="section__header">About Green Loan</h2>
      <p>Green Loan is committed to providing fast and easy financial solutions. Our streamlined loan approval process ensures you get the funds you need, when you need them. With over a decade of expertise in personal loans, investments, and financial education, we're here to support your financial growth.</p>
      <h4>Your success is our priority, and we're dedicated to offering you quick access to funds, top-tier financial education, and high-value investment opportunities.</h4>
    </div>
  </section>

  <section class="section__container service__container" id="services">
    <p class="section__subheader">Our Services</p>
    <h2 class="section__header">What We Offer</h2>
    <div class="service__grid">
      <!-- Personal Loans Service Card -->
      <div class="service__card service__card--personal-loan" id="personal-loan-card" onclick="scrollToLoanApplication()">
        <span><i class="ri-money-dollar-circle-line"></i></span>
        <div class="service__content">
          <h4>Loan Application</h4>
          <p>Get a loan with a low 39.99% interest rate, up to R10 000, approved in under 24 hours. Flexible options available to suit your needs.</p>
        </div>
        <img src="assets/loan1.jpg" alt="Loan Application" class="service__background" />
      </div>

      <!-- Investment Opportunities Service Card -->
      <a href="login.html" class="service__card service__card--investment" id="investment-card">
        <span><i class="ri-line-chart-line"></i></span>
        <div class="service__content">
          <h4>Investment Opportunities</h4>
          <p>Grow your wealth with our trusted investment plans. Choose from a range of options to maximize your returns.</p>
        </div>
        <img src="assets/investment.jpg" alt="Investment Opportunities" class="service__background" />
      </a>

      <!-- Interest Calculator Service Card -->
      <a href="calculator.html" class="service__card service__card--calculator" id="calculator-card">
        <span><i class="ri-calculator-line"></i></span>
        <div class="service__content">
          <h4>Interest Calculator</h4>
          <p>Use our easy-to-use calculator to estimate your loan repayment and interest based on different borrowing amounts.</p>
        </div>
        <img src="assets/calc.png" alt="Interest Calculator" class="service__background" />
      </a>

      <!-- Financial Education Service Card -->
      <div class="service__card service__card--education">
        <a href="assets/finance.pdf" download>
          <span><i class="ri-book-line"></i></span>
          <div class="service__content">
            <h4>Financial Education</h4>
            <p>Access valuable resources to learn more about managing finances, investing, and maximizing your loan benefits.</p>
          </div>
          <img src="assets/edu.png" alt="Financial Education" class="service__background" />
        </a>
      </div>
    </div>
  </section>

  <section class="section__container contact__container" id="contact">
    <p class="section__subheader">Contact Us</p>
    <h2 class="section__header">Get in Touch</h2>
    <p>Whatsapp/Call: +27 640 5195 93</p>
    <p>Email: <a href="greenservice.loan@gmail.com">greenservice.loan@gmail.com</a></p>
  </section>

  <section class="section__container loan__application hidden" id="loan-application">
    <h2 class="section__header">Apply for a Loan</h2>
    <form id="loanApplicationForm">
      <div class="form__group">
        <label for="name">Full Name</label>
        <input type="text" id="name" name="name" required />
      </div>
      <div class="form__group">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" required />
      </div>
      <div class="form__group">
        <label for="phone">Phone Number</label>
        <input type="tel" id="phone" name="phone" required />
      </div>
      <div class="form__group">
        <label for="address">Address</label>
        <input type="text" id="address" name="address" required />
      </div>
      <div class="form__group">
        <label for="idNumber">ID Number</label>
        <input type="text" id="idNumber" name="idNumber" required />
      </div>
      <div class="form__group">
        <label for="dob">Date of Birth</label>
        <input type="date" id="dob" name="dob" required />
      </div>
      <div class="form__group">
        <label for="gender">Gender</label>
        <select id="gender" name="gender" required>
          <option value="" disabled selected>Select your gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="other">Other</option>
        </select>
      </div>
      <div class="form__group">
        <label for="amount">Amount</label>
        <input type="number" id="amount" name="amount" required />
      </div>
      <div class="form__group">
        <label for="purpose">Purpose</label>
        <select id="purpose" name="purpose" required>
          <option value="personal">Personal</option>
          <option value="business">Business</option>
          <option value="education">Education</option>
          <option value="medical">Medical</option>
        </select>
      </div>
      <div class="form__group">
        <label for="dueDate">Due Date</label>
        <input type="date" id="dueDate" name="dueDate" required />
      </div>
      <div class="form__group">
        <label for="bank">Bank Name</label>
        <select id="bank" name="bank" required>
          <option value="fnb">FNB</option>
          <option value="absa">ABSA</option>
          <option value="capitec">Capitec</option>
          <option value="nedbank">Nedbank</option>
          <option value="standard-bank">Standard Bank</option>
        </select>
      </div>
      <div class="form__group">
        <label for="account-number">Account Number</label>
        <input type="text" id="account-number" name="account-number" required />
      </div>
      <div class="form__group">
        <label for="bankStatement">3 Months Bank Statement</label>
        <input type="file" id="bankStatement" name="bankStatement" accept=".pdf,.jpg,.png" required />
      </div>
      <div class="form__group">
        <label for="idPicture">ID Picture</label>
        <input type="file" id="idPicture" name="idPicture" accept=".jpg,.png,.jpeg" required />
      </div>
      <button type="submit">Submit Application</button>
    </form>
  </section>

  <!-- Loader -->
  <div id="loader" style="display:none;">
    <div class="loader"></div>
  </div>

  <!-- Success Popup -->
  <div id="success-popup" class="popup" style="display:none;">
    <p id="success-message">Loan Application Submitted Successfully!</p>
    <p style="color: var(--primary-color);">Please Re-send your bank statement and ID via email (greenservice.loan@gmail.com) Subject "Bank Statement"</p>
    <button onclick="closeSuccessPopup()">Close</button>
  </div>

  <footer class="footer">
    <div class="section__container footer__container">
      <div class="footer__col">
        <h5><a href="index.html">Green Loan</a></h5>
        <p>Your reliable partner for quick, hassle-free loan services and investment opportunities.</p>
        <div class="footer__socials">
          <a href="mailto:greenservice.loan@gmail.com"><i class="ri-mail-fill"></i></a>
          <a href="https://www.facebook.com/greenloan"><i class="ri-facebook-fill"></i></a>
          <a href="https://linkedin.com/company/greenloan"><i class="ri-linkedin-fill"></i></a>
          <a href="https://twitter.com/greenloan"><i class="ri-twitter-fill"></i></a>
        </div>
      </div>
      <div class="footer__col">
        <h4>Quick Links</h4>
        <div class="footer__links">
          <a href="index.html#services">Our Services</a>
          <a href="index.html#about">About Us</a>
          <a href="index.html#contact">Contact Us</a>
        </div>
      </div>
      <div class="footer__col">
        <h4>About Us</h4>
        <p>Green Financial Services is a leading financial institution dedicated to providing accessible and affordable loan solutions for individuals and businesses. We combine innovation with financial expertise to offer products that genuinely meet our clients' needs.</p>
      </div>
    </div>
  </footer>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyCWoEdf5p3T8DfJX3IWw3s6PNWKjXdo9-s",
      authDomain: "robot-1ed2b.firebaseapp.com",
      databaseURL: "https://robot-1ed2b-default-rtdb.firebaseio.com/",
      projectId: "robot-1ed2b",
      storageBucket: "robot-1ed2b.appspot.com",
      messagingSenderId: "71843575877",
      appId: "1:71843575877:android:61b8b09dc5bf5d21158b2c",
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    const dbRef = firebase.database().ref("loan_applications");

    // Mobile Menu Toggle
    document.getElementById("menu-btn").addEventListener("click", function() {
      document.getElementById("nav-links").classList.toggle("active");
    });

    // Close mobile menu when clicking on a link
    document.querySelectorAll(".nav__links .link").forEach(link => {
      link.addEventListener("click", function() {
        document.getElementById("nav-links").classList.remove("active");
      });
    });

    // Function to send email notification to the applicant
    function sendLoanApplicationEmail(applicantEmail, applicantName, loanDetails) {
      const emailParams = {
        to_name: applicantName,
        to_email: applicantEmail,
        loan_amount: loanDetails.amount,
        total_amount: loanDetails.amount * 1.4, // 39.99% interest
        due_date: loanDetails.dueDate,
        message: `Dear ${applicantName}, your loan application has been received. Below are the details of your application:`,
        show_banking_details: true,
      };

      // Send email using EmailJS
      emailjs.send("service_auuykij", "template_nr0z4if", emailParams)
        .then(function(response) {
          console.log("Email sent successfully!", response.status, response.text);
        }, function(error) {
          console.log("Failed to send email.", error);
        });
    }

    // Handle form submission
    document.getElementById("loanApplicationForm").addEventListener("submit", function(event) {
      event.preventDefault();

      // Show Loader
      document.getElementById("loader").style.display = "block";

      // Collect Form Data
      const formData = {
        name: document.getElementById("name").value,
        email: document.getElementById("email").value,
        phone: document.getElementById("phone").value,
        address: document.getElementById("address").value,
        idNumber: document.getElementById("idNumber").value,
        dob: document.getElementById("dob").value,
        gender: document.getElementById("gender").value,
        amount: document.getElementById("amount").value,
        purpose: document.getElementById("purpose").value,
        dueDate: document.getElementById("dueDate").value,
        bank: document.getElementById("bank").value,
        accountNumber: document.getElementById("account-number").value,
        timestamp: new Date().toISOString(),
      };

      // File inputs
      const bankStatement = document.getElementById("bankStatement").files[0];
      const idPicture = document.getElementById("idPicture").files[0];

      // Send to Firebase
      dbRef.push(formData, (error) => {
        if (error) {
          alert("Error submitting application. Please try again.");
        } else {
          // Send Email Notification
          sendLoanApplicationEmail(formData.email, formData.name, {
            amount: formData.amount,
            dueDate: formData.dueDate,
          });

          // Show success message
          document.getElementById("success-popup").style.display = "block";
        }
        document.getElementById("loader").style.display = "none";
      });

      // Clear form fields after submission
      document.getElementById("loanApplicationForm").reset();
    });

    function closeSuccessPopup() {
      document.getElementById("success-popup").style.display = "none";
    }

    function scrollToLoanApplication() {
      const loanApplicationSection = document.getElementById('loan-application');
      loanApplicationSection.classList.remove('hidden');
      loanApplicationSection.scrollIntoView({ behavior: 'smooth' });
    }

    // Add scroll reveal effect
    document.addEventListener("DOMContentLoaded", function() {
      // Reveal elements on scroll
      const revealElements = document.querySelectorAll('.service__card, .section__header, .about__container, .contact__container');
      
      window.addEventListener('scroll', function() {
        for (let i = 0; i < revealElements.length; i++) {
          const elementTop = revealElements[i].getBoundingClientRect().top;
          const windowHeight = window.innerHeight;
          
          if (elementTop < windowHeight - 100) {
            revealElements[i].style.opacity = "1";
            revealElements[i].style.transform = "translateY(0)";
          }
        }
      });
    });
  </script>
</body>
</html>
